<%= render "partial/header" %>

<div class="container my-5">

  <!-- Announcement Section -->
  <div class="row mb-5">
    <div class="col-12 text-center">
      <h2 class="fw-bold text-primary display-5">Announcements</h2>
      <p class="text-muted fs-5">Stay updated with the latest offers and announcements.</p>
    </div>
  </div>

  <!-- Notice Section -->
  <% if notice.present? %>
    <div class="alert alert-info text-center shadow-sm fw-bold py-3 rounded mb-4" role="alert">
      <%= notice %>
    </div>
  <% end %>

  <% if alert.present? %>
    <div class="alert alert-warning text-center shadow-sm fw-bold py-3 rounded mb-4" role="alert">
      <%= alert %>
    </div>
  <% end %>

  <!-- Offer Images Section -->
  <div class="row g-4">
    <% @offers.each do |offer| %>
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden">
          <%= image_tag offer.image.url, class: "card-img-top img-fluid rounded-top", alt: offer.name %>
          <div class="card-body text-center">
            <h5 class="card-title fw-bold text-primary"><%= offer.name %></h5>
            <p class="card-text text-muted fs-6">$<%= offer.amount %> only for <%= offer.coin %></p>
            <!-- Trigger the modal -->
            <button type="button" class="btn btn-primary btn-sm px-4 py-2 mt-2" data-bs-toggle="modal" data-bs-target="#confirmModal-<%= offer.id %>">
              Buy Now
            </button>
          </div>
        </div>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="confirmModal-<%= offer.id %>" tabindex="-1" aria-labelledby="modalLabel-<%= offer.id %>" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content rounded-4 shadow-lg">
            <div class="modal-header bg-primary text-white">
              <h5 class="modal-title" id="modalLabel-<%= offer.id %>">Confirm Purchase</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to buy <strong><%= offer.name %></strong> for <strong>$<%= offer.amount %></strong>?
            </div>
            <div class="modal-footer">
              <%= button_to 'Yes, Buy Now', shop_index_path(offer_id: offer), method: :post, class: 'btn btn-primary px-4' %>
              <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

</div>

<!-- Custom Styles for Enhanced Design -->
<style>
    /* General Spacing */
    .container {
        padding: 2rem;
    }

    /* Notice Section */
    .alert {
        border-left: 5px solid #007bff;
        font-weight: bold;
        font-size: 1.1rem;
        border-radius: 0.5rem;
        padding: 1.5rem;
    }

    .alert-warning {
        background-color: #fff3cd;
        border-left-color: #ffc107;
    }

    /* Card Styling */
    .card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        border-radius: 1rem;
    }

    .card:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .card-img-top {
        max-height: 200px;
        object-fit: cover;
    }

    /* Modal Styles */
    .modal-content {
        border-radius: 1rem;
    }

    .modal-header {
        border-bottom: none;
        padding: 1.5rem;
    }

    .modal-footer {
        border-top: none;
        padding: 1.5rem;
    }

    /* Typography */
    .card-title {
        font-size: 1.25rem;
        font-weight: bold;
    }

    .card-text {
        font-size: 1rem;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
    }

    .btn-secondary {
        background-color: #6c757d;
        border-color: #6c757d;
    }

    .btn-secondary:hover {
        background-color: #5a6268;
        border-color: #5a6268;
    }
</style>

<%= render "partial/footer" %>
